import{j as h}from"./jsx-runtime.B6N9iRLn.js";import{r as n,R as v}from"./index.DNi1g-pO.js";import{l as J,j as fe,H as me,i as P,c as ve,u as ee,p as be}from"./use-server-handoff-complete.BXIqNzS3.js";import{n as y,M as pe,W as D,y as te,O as F,o as R,m as we,t as ge,H as ne,s as xe,u as re}from"./use-sync-refs.D0KZ01Xc.js";import{F as $e}from"./XMarkIcon.2w2G2u9O.js";function Ce({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ee=n.forwardRef(Ce);function Re(){let e=n.useRef(!1);return y(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:ae)!==n.Fragment||v.Children.count(e.children)===1}let U=n.createContext(null);U.displayName="TransitionContext";var je=(e=>(e.Visible="visible",e.Hidden="hidden",e))(je||{});function Te(){let e=n.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=n.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=n.createContext(null);A.displayName="NestingContext";function B(e){return"children"in e?B(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ie(e,t){let r=xe(e),i=n.useRef([]),b=Re(),s=be(),p=R((u,l=F.Hidden)=>{let o=i.current.findIndex(({el:a})=>a===u);o!==-1&&(re(l,{[F.Unmount](){i.current.splice(o,1)},[F.Hidden](){i.current[o].state="hidden"}}),s.microTask(()=>{var a;!B(i)&&b.current&&((a=r.current)==null||a.call(r))}))}),j=R(u=>{let l=i.current.find(({el:o})=>o===u);return l?l.state!=="visible"&&(l.state="visible"):i.current.push({el:u,state:"visible"}),()=>p(u,F.Unmount)}),x=n.useRef([]),m=n.useRef(Promise.resolve()),w=n.useRef({enter:[],leave:[]}),$=R((u,l,o)=>{x.current.splice(0),t&&(t.chains.current[l]=t.chains.current[l].filter(([a])=>a!==u)),t?.chains.current[l].push([u,new Promise(a=>{x.current.push(a)})]),t?.chains.current[l].push([u,new Promise(a=>{Promise.all(w.current[l].map(([T,N])=>N)).then(()=>a())})]),l==="enter"?m.current=m.current.then(()=>t?.wait.current).then(()=>o(l)):o(l)}),C=R((u,l,o)=>{Promise.all(w.current[l].splice(0).map(([a,T])=>T)).then(()=>{var a;(a=x.current.shift())==null||a()}).then(()=>o(l))});return n.useMemo(()=>({children:i,register:j,unregister:p,onStart:$,onStop:C,wait:m,chains:w}),[j,p,i,$,C,w,m])}let ae=n.Fragment,se=pe.RenderStrategy;function Pe(e,t){var r,i;let{transition:b=!0,beforeEnter:s,afterEnter:p,beforeLeave:j,afterLeave:x,enter:m,enterFrom:w,enterTo:$,entered:C,leave:u,leaveFrom:l,leaveTo:o,...a}=e,[T,N]=n.useState(null),d=n.useRef(null),f=le(e),oe=te(...f?[d,t,N]:t===null?[]:[t]),G=(r=a.unmount)==null||r?F.Unmount:F.Hidden,{show:g,appear:K,initial:Q}=Te(),[E,I]=n.useState(g?"visible":"hidden"),V=Fe(),{register:k,unregister:M}=V;y(()=>k(d),[k,d]),y(()=>{if(G===F.Hidden&&d.current){if(g&&E!=="visible"){I("visible");return}return re(E,{hidden:()=>M(d),visible:()=>k(d)})}},[E,d,k,M,g,G]);let W=J();y(()=>{if(f&&W&&E==="visible"&&d.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[d,E,W,f]);let de=Q&&!K,Y=K&&g&&Q,X=n.useRef(!1),L=ie(()=>{X.current||(I("hidden"),M(d))},V),Z=R(_=>{X.current=!0;let O=_?"enter":"leave";L.onStart(d,O,H=>{H==="enter"?s?.():H==="leave"&&j?.()})}),q=R(_=>{let O=_?"enter":"leave";X.current=!1,L.onStop(d,O,H=>{H==="enter"?p?.():H==="leave"&&x?.()}),O==="leave"&&!B(L)&&(I("hidden"),M(d))});n.useEffect(()=>{f&&b||(Z(g),q(g))},[g,f,b]);let ce=!(!b||!f||!W||de),[,c]=fe(ce,T,g,{start:Z,end:q}),he=we({ref:oe,className:((i=ge(a.className,Y&&m,Y&&w,c.enter&&m,c.enter&&c.closed&&w,c.enter&&!c.closed&&$,c.leave&&u,c.leave&&!c.closed&&l,c.leave&&c.closed&&o,!c.transition&&g&&C))==null?void 0:i.trim())||void 0,...me(c)}),S=0;return E==="visible"&&(S|=P.Open),E==="hidden"&&(S|=P.Closed),c.enter&&(S|=P.Opening),c.leave&&(S|=P.Closing),v.createElement(A.Provider,{value:L},v.createElement(ve,{value:S},ne({ourProps:he,theirProps:a,defaultTag:ae,features:se,visible:E==="visible",name:"Transition.Child"})))}function ye(e,t){let{show:r,appear:i=!1,unmount:b=!0,...s}=e,p=n.useRef(null),j=le(e),x=te(...j?[p,t]:t===null?[]:[t]);J();let m=ee();if(r===void 0&&m!==null&&(r=(m&P.Open)===P.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[w,$]=n.useState(r?"visible":"hidden"),C=ie(()=>{r||$("hidden")}),[u,l]=n.useState(!0),o=n.useRef([r]);y(()=>{u!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),l(!1))},[o,r]);let a=n.useMemo(()=>({show:r,appear:i,initial:u}),[r,i,u]);y(()=>{r?$("visible"):!B(C)&&p.current!==null&&$("hidden")},[r,C]);let T={unmount:b},N=R(()=>{var f;u&&l(!1),(f=e.beforeEnter)==null||f.call(e)}),d=R(()=>{var f;u&&l(!1),(f=e.beforeLeave)==null||f.call(e)});return v.createElement(A.Provider,{value:C},v.createElement(U.Provider,{value:a},ne({ourProps:{...T,as:n.Fragment,children:v.createElement(ue,{ref:x,...T,...s,beforeEnter:N,beforeLeave:d})},theirProps:{},defaultTag:n.Fragment,features:se,visible:w==="visible",name:"Transition"})))}function Ne(e,t){let r=n.useContext(U)!==null,i=ee()!==null;return v.createElement(v.Fragment,null,!r&&i?v.createElement(z,{ref:t,...e}):v.createElement(ue,{ref:t,...e}))}let z=D(ye),ue=D(Pe),Se=D(Ne),He=Object.assign(z,{Child:Se,Root:z});const ke=(e,t)=>e.data.autogenerate.type==="home"?`/${t}`:e.data.autogenerate.enabled?`/${t}/events/${e.data.slug||e.id}`:`/${t}/pages/${e.data.slug||e.id}`,Be=e=>{const[t,r]=n.useState(!1),i=n.useMemo(()=>e.pages.find(s=>s.data.autogenerate.type==="home")?.id,[e.pages]),b=s=>s.id===(e.pageUuid||i)||e.pageUuid===s.data.slug;return h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>r(!t),type:"button",children:h.jsx(Ee,{className:"w-8 h-8"})}),t&&h.jsx("div",{className:"absolute top-0 left-0 h-dvh w-dvw",onClick:()=>r(!1)}),h.jsx(He,{show:t,children:h.jsxs("div",{className:"shadow absolute top-0 left-0 h-dvh w-80 bg-white w-10 transition duration-200 ease-in-out data-[closed]:-translate-x-full text-black text-sm",children:[h.jsx("div",{className:"flex w-full h-24 justify-end px-8",children:h.jsx("button",{type:"button",onClick:()=>r(!1),children:h.jsx($e,{className:"w-8 h-8"})})}),e.pages.map(s=>h.jsx("a",{href:ke(s,e.baseUrl),children:h.jsx("div",{className:"p-4 hover:bg-blue-hover",children:h.jsx("p",{className:`${b(s)?"font-bold":""} ${s.data.parent?"ml-6":""}`,title:s.data.title,children:s.data.title},s.id)})},s.id))]})})]})};export{Be as default};
