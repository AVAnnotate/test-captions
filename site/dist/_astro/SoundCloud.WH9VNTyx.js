import{r as d,R as c}from"./index.DNi1g-pO.js";import{g as m,c as f,b as y}from"./Player.CppJqWXz.js";import"./jsx-runtime.B6N9iRLn.js";import"./index.B7xmebis.js";import"./index.iExtbhlT.js";import"./store.DMES6hWa.js";import"./index.BDWyZ8Gq.js";var P=Object.defineProperty,g=(i,t,e)=>t in i?P(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,r=(i,t,e)=>(g(i,typeof t!="symbol"?t+"":t,e),e);const b="https://w.soundcloud.com/player/api.js",R="SC";class o extends d.Component{constructor(){super(...arguments),r(this,"callPlayer",f),r(this,"duration",null),r(this,"currentTime",null),r(this,"fractionLoaded",null),r(this,"mute",()=>{this.setVolume(0)}),r(this,"unmute",()=>{this.props.volume!==null&&this.setVolume(this.props.volume)}),r(this,"ref",t=>{this.iframe=t})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(t,e){m(b,R).then(n=>{if(!this.iframe)return;const{PLAY:a,PLAY_PROGRESS:l,PAUSE:p,FINISH:u,ERROR:h}=n.Widget.Events;e||(this.player=n.Widget(this.iframe),this.player.bind(a,this.props.onPlay),this.player.bind(p,()=>{this.duration-this.currentTime<.05||this.props.onPause()}),this.player.bind(l,s=>{this.currentTime=s.currentPosition/1e3,this.fractionLoaded=s.loadedProgress}),this.player.bind(u,()=>this.props.onEnded()),this.player.bind(h,s=>this.props.onError(s))),this.player.load(t,{...this.props.config.options,callback:()=>{this.player.getDuration(s=>{this.duration=s/1e3,this.props.onReady()})}})})}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(t,e=!0){this.callPlayer("seekTo",t*1e3),e||this.pause()}setVolume(t){this.callPlayer("setVolume",t*100)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:t}=this.props,e={width:"100%",height:"100%",display:t};return c.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:e,frameBorder:0,allow:"autoplay"})}}r(o,"displayName","SoundCloud");r(o,"canPlay",y.soundcloud);r(o,"loopOnEnded",!0);export{o as default};
